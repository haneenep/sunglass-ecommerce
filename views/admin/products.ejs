<%- include('../layout/adminHead') -%>

<!--wrapper-->
<div class="wrapper">
    <!--sidebar wrapper -->
    <%- include('../layout/adminSideWrapper') -%>
    <!--end sidebar wrapper -->

    <!--start header -->
    <%- include('../layout/adminHeaderNav') -%>
    <!--end header -->

    <!--start page wrapper -->
    <div class="page-wrapper">
        <div class="page-content">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-lg-3 col-xl-2">
                                    <a href="/admin/add-product" class="btn btn-success mb-3 mb-lg-0"><i class='bx bxs-plus-square'></i> New Product</a>
                                </div>
                                <div class="col-lg-9 col-xl-10">
                                    <form class="float-lg-end">
                                        <div class="row row-cols-lg-auto g-2">
                                            <div class="col-12">
                                                <div class="position-relative">
                                                    <input type="text" class="form-control ps-5" placeholder="Search Product..."> 
                                                    <span class="position-absolute top-50 product-show translate-middle-y"><i class="bx bx-search"></i></span>
                                                </div>
                                            </div>
                                            <!-- Additional filter options can go here -->
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 row-cols-xxl-5 product-grid">
                <% products.forEach(product => { %>
                <div class="col">
                    <div class="card">
                        <% if (product.images && product.images.length > 0) { %>
                        <a href=""><img src="<%= product.images[0] %>" class="card-img-top" alt="<%= product.productName %>"></a>
                        <% } else { %>
                        <img src="path/to/default-image.png" class="card-img-top" alt="<%= product.productName %>">
                        <% } %>
                        <div class="">
                            <div class="position-absolute top-0 end-0 m-3 product-discount">
                                <span class="">-10%</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title cursor-pointer"><%= product.productName %></h6>
                            <div class="clearfix">
                                <p class="mb-0 float-start"><strong>In Stock: <%= product.stockQuantity %></strong></p>
                                <p class="mb-0 float-end fw-bold">
                                    <span>$<%= product.price %></span>
                                </p>  
                            </div>
                            <div class="mt-1">
                                <% if (product.category) { %>
                                    <p class="mb-0"><strong><%= product.category.name %></strong></p>
                                    <% } %> 
                                <p class="mb-0"><%= product.createdAt.toDateString() %></p>
                            </div>
                            <div class="mt-3">
                                <a href="/admin/edit-product/<%= product._id %>" class="btn btn-sm btn-warning">Edit</a>
                                <form action="/admin/delete-product/<%= product._id %>" method="POST" class="d-inline">
                                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <% }); %>
            </div>
        </div>
    </div>
    <!--end page wrapper -->

    <!--start overlay-->
    <div class="overlay toggle-icon"></div>
    <!--end overlay-->

    <!--Start Back To Top Button-->
    <a href="javascript:;" class="back-to-top"><i class='bx bxs-up-arrow-alt'></i></a>
    <!--End Back To Top Button-->

    <footer class="page-footer">
        <p class="mb-0">Copyright Â© 2021. All right reserved.</p>
    </footer>
</div>
<!--end wrapper-->

<!--start switcher-->
<%- include('../layout/adminTheme') -%>
<!--end switcher-->

<!-- Bootstrap JS -->
<script src="assets/js/bootstrap.bundle.min.js"></script>
<!--plugins-->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/plugins/simplebar/js/simplebar.min.js"></script>
<script src="assets/plugins/metismenu/js/metisMenu.min.js"></script>
<script src="assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
<!--app JS-->
<script src="assets/js/app.js"></script>
</body>
</html>
