<%- include("../layout/header") -%>

<div class="limiter">
    <div class="container-login100">
        <div class="wrap-login100">
            <div class="login100-pic js-tilt" data-tilt>
                <img src="images/img-03.png" alt="IMG">
            </div>

            <form id="loginForm" class="login100-form validate-form" action="/forgot" method="post">
                <span class="login100-form-title">
                    Forgot Password
                </span>
                <% if (locals.err) { %>
                    <p class="text-danger"><%= err %></p>
                   <% } %>
                <div class="wrap-input100 validate-input" data-validate="Valid email is required: ex@abc.xyz">
                    <input id="email" class="input100" type="text" name="email" placeholder="Email" required>
                    <span class="focus-input100"></span>
                    <span class="symbol-input100">
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                    </span>
                </div>
                <span id="emailError" class="error-message" style="color:red; display:none;">Valid email is required: ex@abc.xyz</span>

                <div class="container-login100-form-btn">
                    <button id="submitBtn" type="button" class="login100-form-btn">
                        Send
                    </button>
                </div>

                <div class="text-center p-t-12">
                    <span class="txt1">
                        Not Registered ?
                    </span>&nbsp;
                    <a class="txt2" href="/loginandsignup">
                         Create an Account
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<%- include('../layout/footer') -%>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const emailInput = document.getElementById('email');
    const submitBtn = document.getElementById('submitBtn');
    const loginForm = document.getElementById('loginForm');
    const emailError = document.getElementById('emailError');

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    function validateEmail() {
        const isValid = emailPattern.test(emailInput.value);
        emailError.style.display = isValid ? 'none' : 'block';
        return isValid;
    }

    submitBtn.addEventListener('click', function () {
        if (validateEmail()) {
            loginForm.submit();
        }
    });

    emailInput.addEventListener('input', validateEmail);
});
</script>
